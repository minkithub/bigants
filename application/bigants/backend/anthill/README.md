## anthill

Prophet 라이브러리를 활용한 예측모델을 서비스.
런타임에 모델을 학습하고 서비스한다.

## API
### 1. 종목 정보 (stocks)
* 인자를 주지 않으면 모든 종목 리스트를 반환
* 현재 KS 이름순, KQ 이름순으로 반환 (전체 이름 순으로 반환하도록 수정할 것)
#### Request
```sh
curl 'https://anthill-ljnq6oi2dq-an.a.run.app/api/v1/stocks?q=SK'
```
#### Response
```js
{
  // 필요 시 메타데이터 추가할 것
  "data": [
    {
      "code": "034730.KS",
      "name_ko": "SK"
    },
    {
      "code": "011790.KS",
      "name_ko": "SKC"
    },
    ... ,
    {
      "code": "052260.KQ",
      "name_ko": "SK바이오랜드"
    }
  ]
}
```

### 2. 주가 과거 데이터 (history)
* [고가, 저가, 종가]의 리스트 형태로 반환
* `start`부터 `end`의 전 날까지 순서대로 저장되며, 데이터가 없는 날은 `null`로 표시.
* `start` 생략 시 1년 전으로 계산
* `end` 생략 시 오늘로 계산
#### Request
```sh
curl -X POST 'https://anthill-ljnq6oi2dq-an.a.run.app/api/v1/history' -d '{
  "code": "034730.KS",
  "start": "2020-01-05",
  "end": "2020-01-15"
}'
```
#### Response
```js
{
  // 필요 시 메타데이터 추가할 것
  "data": [
    null, // 2020-01-05
    null,
    [257500.0, 250500.0, 257000.0],
    [252000.0, 243500.0, 244500.0],
    [250000.0, 245000.0, 247000.0],
    [248000.0, 244000.0, 246000.0],
    null,
    null,
    [247000.0, 243000.0, 246500.0],
    [249500.0, 246000.0, 248000.0] // 2020-01-15
  ]
}
```

### 3. 예측 데이터 (predict)
* `type`에 `HIGH`, `LOW`, `CLOSE` 중 하나를 명시해야 함 (default: `CLOSE`)
* 오늘로부터 14일치를 모두 반환함. (공휴일 제외 5일만 반환하도록 할 것?)
* holidays를 넣지 않거나 빈 리스트를 넣어 보내면, holiday effect를 고려하지 않고 반환
#### Request
```sh
curl -X POST 'https://anthill-ljnq6oi2dq-an.a.run.app/api/v1/predict' -d '{
  "code": "034730.KS",
  "start": "2017-01-01",
  "end": "2020-02-14",
  "type": "CLOSE",
  "holidays": [
    "2017-12-24",
    "2018-12-24",
    "2019-12-24"
  ]
}'
```
#### Response
```js
{
  "mae": 22155.296077947554,
  "mape": 8.402783181847418,
  "data": [
    259171.36821298674, // Today
    -77434.2667077652,
    -214025.65476877516,
    194426.3944140609,
    245983.35638765318,
    234847.53035449432,
    232206.0298672485,
    259552.90550079255,
    -77052.7294202353,
    -213644.11748065578,
    194807.9317022382,
    246364.89367588586,
    235229.06764246526,
    232587.56715516746 // Today + 13 days
  ]
}
```
